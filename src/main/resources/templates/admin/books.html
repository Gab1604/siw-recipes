<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{base :: head}"></head>
<body>
<header th:replace="~{base :: header}"></header>

<main class="content">
  <h2>Gestione Libri</h2>

  <div th:if="${#lists.isEmpty(books)}">
    <p>Non ci sono libri nel catalogo.</p>
  </div>

  <table class="table" th:if="${!#lists.isEmpty(books)}">
    <thead>
    <tr>
      <th>ID</th>
      <th>Titolo</th>
      <th>Anno</th>
      <th>Autori</th>
      <th>Azioni</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${books}">
      <td th:text="${book.id}">1</td>
      <td>
        <a th:href="@{/books/{id}(id=${book.id})}" th:text="${book.title}">Titolo</a>
      </td>
      <td th:text="${book.publicationYear}">2025</td>
      <td>
        <span th:each="author : ${book.authors}" th:text="${author.lastName}" class="tag small"></span>
      </td>
      <td>
        <a th:href="@{/books/edit/{id}(id=${book.id})}" class="btn small">Modifica</a>
        <form th:action="@{/books/delete/{id}(id=${book.id})}" method="post" style="display:inline">
          <button type="submit" class="btn small danger">Elimina</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <a th:href="@{/admin}" class="btn">Torna alla Dashboard</a>
</main>

<footer th:replace="~{base :: footer}"></footer>
</body>
</html>
