<!DOCTYPE html>
<html lang="it"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/springsecurity6">
<head th:replace="~{base :: head}"></head>
<body>
<header th:replace="~{base :: header}"></header>

<main class="content">
  <h2>Profilo di <span th:text="${credentials.username}">Username</span></h2>

  <div class="profile-info">
    <p><strong>Nome:</strong>
      <span th:text="${user.firstName}">Nome</span>
      <span th:text="${user.lastName}">Cognome</span>
    </p>
    <p><strong>Username:</strong>
      <span th:text="${credentials.username}">username</span>
    </p>
    <p><strong>Ruolo:</strong>
      <span th:text="${credentials.role}">DEFAULT</span>
    </p>

    <div class="button-group">
      <a th:href="@{/user/profile/edit}" class="btn">Modifica Profilo</a>
    </div>
  </div>

  <h3>Le tue recensioni</h3>
  <div th:if="${#lists.isEmpty(user.reviews)}">
    <p>Non hai ancora scritto recensioni.</p>
  </div>

  <ul th:if="${!#lists.isEmpty(user.reviews)}" class="list-group">
    <li th:each="review : ${user.reviews}" class="list-group-item">
      <strong th:text="${review.book.title}">Titolo Libro</strong>
      <span class="rating" th:text="${review.rating} + '/5'">5/5</span>
      <p th:text="${review.text}">Testo recensione...</p>
      <small th:text="${#dates.format(review.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2025 12:00</small>
    </li>
  </ul>
</main>

<footer th:replace="~{base :: footer}"></footer>
</body>
</html>
